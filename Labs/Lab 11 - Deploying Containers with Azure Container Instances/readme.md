# Lab 11 - Deploying Containers with Azure Container Instances

## Lab Scenario

Your organization has a web application that runs on a virtual machine in your on-premises data center. The organization wants to move all applications to the cloud but doesn’t want to have a large number of servers to manage. You decide to evaluate Azure Container Instances and Docker.

## Aim

The aim of this lab is to deploy and manage a containerized application using Azure Container Instances (ACI), a serverless container hosting platform in Azure.


## What You Will Achieve by the End of the Lab

- Deploy a web app in a container using Azure Container Instances (ACI).

- Access the app online through a public DNS name.

- Verify the app is running and view basic logs.

- Understand how ACI works without needing to manage servers.


## Architecture Diagram

![Lab 11 - Architecture diagram](./Lab%2011%20Architecture%20Diagram.png)
---

## Task 1: Deploy an Azure Container Instance using a Docker Image

In this task, you will create a simple web application using a Docker image. Docker is a platform that provides the ability to package and run applications in isolated environments called containers. Azure Container Instances provides the compute environment for the container image.

### Steps

1. **Sign in** to the Azure portal: https://portal.azure.com
2. In the Azure portal, search for and select **Container instances**, then click **+ Create**.
3. On the **Basics** tab of the *Create container instance* blade, specify the following settings (leave others with their default values):

   | Setting         | Value                                                  |
   |-----------------|--------------------------------------------------------|
   | Subscription    | Select your Azure subscription                         |
   | Resource group  | `az104-rg9` (If necessary, select *Create new*)        |
   | Container name  | `az104-c1`                                             |
   | Region          | `East US` (or a region available near you)             |
   | Image Source    | `Quickstart images`                                    |
   | Image           | `mcr.microsoft.com/azuredocs/aci-helloworld:latest` (Linux) |

4. Click **Next: Networking >** and specify the following setting:

   | Setting         | Value                                     |
   |-----------------|-------------------------------------------|
   | DNS name label  | Any valid, globally unique DNS host name  |

   > Note: Your container will be publicly reachable at `dns-name-label.region.azurecontainer.io`. If you receive a *DNS name label not available* error message, specify a different value.

5. Click **Next: Monitoring >** and uncheck **Enable container instance logs**.
6. Click **Next: Advanced >**, review the settings without making any changes.
7. Click **Review + Create**, ensure that the validation passed, and then select **Create**.

> **Note**: Wait for the deployment to complete. This should take 2-3 minutes.

> **Optional**: While you wait, you may be interested in viewing the code behind the sample application. To view the code, browse the `\app` folder.

---

## Task 2: Test and Verify Deployment of an Azure Container Instance

In this task, you review the deployment of the container instance. By default, the Azure Container Instance is accessible over port 80.

### Steps

1. When the deployment completes, select the **Go to resource** link.
2. On the **Overview** blade of the container instance, verify that **Status** is reported as `Running`.
3. Copy the value of the container instance **FQDN**, open a new browser tab, and navigate to the corresponding URL.
4. Verify that the *Welcome to Azure Container Instance* page is displayed.
5. Refresh the page several times to create some log entries, then close the browser tab.
6. In the **Settings** section of the container instance blade, click **Containers**, then click **Logs**.
7. Verify that you see the log entries representing the HTTP GET requests generated by displaying the application in the browser.

---

## Cleanup Your Resources

If you are working with your own subscription, take a minute to delete the lab resources. This will ensure resources are freed up and cost is minimized.

### Options

- In the Azure portal:
  - Select the **resource group**
  - Select **Delete the resource group**
  - Enter the resource group name
  - Click **Delete**

- Using Azure PowerShell:

  ```powershell
  Remove-AzResourceGroup -Name <resourceGroupName>
  ```

- Using Azure CLI:

  ```bash
  az group delete --name <resourceGroupName>
  ```

---

## Implementation Video


[![Watch the video](./Deploying%20Containers%20with%20Azure%20Container%20Instances%20-%20Thumbnail.png)](https://youtu.be/jzlS9zP7AlA)

---

## Learn More

- [Run container images in Azure Container Instances](https://learn.microsoft.com/training/modules/create-run-container-images-azure-container-instances/)

---

## Key Takeaways

- **Azure Container Instances (ACI)** is a service that enables you to deploy containers on the Microsoft Azure public cloud.
- **ACI doesn’t require you to provision or manage any underlying infrastructure.**
- **ACI supports both Linux containers and Windows containers.**
- **Workloads on ACI are usually started and stopped by some kind of process or trigger and are usually short-lived.**
